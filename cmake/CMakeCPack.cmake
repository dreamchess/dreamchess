set(CPACK_PACKAGE_VERSION ${PROJECT_VERSION})
set(CPACK_PACKAGE_VENDOR DreamChess)
set(CPACK_PACKAGE_INSTALL_DIRECTORY ${PROJECT_NAME})
set(CPACK_RESOURCE_FILE_LICENSE ${CMAKE_SOURCE_DIR}/LICENSE.txt)
set(CPACK_WIX_UPGRADE_GUID 11F270FA-4B99-4398-B2EC-530643FCD4DF)
set(CPACK_WIX_TEMPLATE ${CMAKE_SOURCE_DIR}/dist/wix/WIX.template.in)
set(CPACK_WIX_PRODUCT_ICON ${CMAKE_SOURCE_DIR}/dreamchess/src/win32.ico)
set(CPACK_COMMAND_HDIUTIL ${CMAKE_CURRENT_LIST_DIR}/hdiutil_repeat.sh)

if(CMAKE_SYSTEM_NAME MATCHES "Darwin")
	set(CPACK_SYSTEM_NAME macOS)
	list(LENGTH CMAKE_OSX_ARCHITECTURES ARCH_COUNT)
	if(${ARCH_COUNT} EQUAL 1)
		string(APPEND CPACK_SYSTEM_NAME "-${CMAKE_OSX_ARCHITECTURES}")
	endif()
elseif(CMAKE_SYSTEM_NAME MATCHES "Windows")
	if(CMAKE_SIZEOF_VOID_P EQUAL 8)
		set(CPACK_SYSTEM_NAME "${CMAKE_SYSTEM_NAME}-x64")
	else()
		set(CPACK_SYSTEM_NAME "${CMAKE_SYSTEM_NAME}-x86")
	endif()
else()
	set(CPACK_SYSTEM_NAME "${CMAKE_SYSTEM_NAME}")
endif()

set(CPACK_PACKAGE_FILE_NAME "${PROJECT_NAME}-${PROJECT_VERSION}${GIT_REV}-${CPACK_SYSTEM_NAME}")

include(CPack)
